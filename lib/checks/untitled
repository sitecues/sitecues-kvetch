// Note to developer:
// IMPORTANT!!!!!! Make sure customToggleButton is your button  <------ This
// Also: you should dynamically change the button text when it gets expanded/shrunken
// From 'Open sitecues' to 'Close sitecues'

function togglePanel() {
  if (togglePanel.isExpanded) {
    togglePanel.isExpanded = false;
    sitecues.shrinkPanel();
  }
  else {
    togglePanel.isExpanded = true;
    if (document.activeElement === customToggleButton) {
       // Button was focused: first focus the badge, wait, then expand
       // This will open the badge in keyboard mode
       document.getElementById('sitecues-badge').focus();
       setTimeout(sitecues.expandPanel, 0);
    }
    else {
      // Button was not focused: just open the panel
      sitecues.expandPanel();
    }
  }
}

customToggleButton.addEventListener('mousedown', togglePanel);
customToggleButton.addEventListener('keydown', function(evt) {
  if (evt.keyCode === 13 || evt.keyCode === 32) {
    togglePanel(); // Enter or space key
  }
});
